# CategoryRAG é…ç½®å¿«é€Ÿå‚è€ƒ

## ğŸ¯ æ§åˆ¶æœ€ç»ˆæ–‡æ¡£æ•°é‡çš„å…³é”®å‚æ•°

### â­ æ ¸å¿ƒå‚æ•° (å½±å“æœ€ç»ˆå›ç­”çš„æ–‡æ¡£æ•°)

```yaml
# é…ç½®æ–‡ä»¶: config/unified_config.yaml

# 1. åˆå§‹æ£€ç´¢æ•°é‡
retrieval:
  top_k: 30  # ä»å‘é‡æ•°æ®åº“æ£€ç´¢çš„åŸå§‹æ–‡æ¡£æ•°

# 2. é‡æ’åæ–‡æ¡£æ•°é‡ â­ æœ€å…³é”®å‚æ•°
reranker:
  cross_encoder:
    top_k: 20  # æœ€ç»ˆç”¨äºç”Ÿæˆå›ç­”çš„æ–‡æ¡£æ•°é‡
```

## ğŸ“Š å‚æ•°æµç¨‹å›¾

```
ç”¨æˆ·æŸ¥è¯¢
    â†“
åˆå§‹æ£€ç´¢ (retrieval.top_k = 30)
    â†“
é‡æ’ç­›é€‰ (reranker.top_k = 20) â† ğŸ¯ æ§åˆ¶æœ€ç»ˆæ–‡æ¡£æ•°
    â†“
é•¿åº¦æ£€æŸ¥ (max_length = 50000å­—ç¬¦)
    â†“
ç”Ÿæˆå›ç­” (åŸºäºæœ€ç»ˆæ–‡æ¡£æ•°)
```

## ğŸ”§ å¸¸ç”¨é…ç½®åœºæ™¯

### åŸºäº20ä¸ªæ–‡æ¡£ç”Ÿæˆ (å½“å‰é…ç½®)
```yaml
retrieval:
  top_k: 30
reranker:
  cross_encoder:
    top_k: 20  # âœ… å·²é…ç½®ä¸º20ä¸ªæ–‡æ¡£
```

### åŸºäº15ä¸ªæ–‡æ¡£ç”Ÿæˆ (å¿«é€Ÿå“åº”)
```yaml
retrieval:
  top_k: 25
reranker:
  cross_encoder:
    top_k: 15
```

### åŸºäº30ä¸ªæ–‡æ¡£ç”Ÿæˆ (æ·±åº¦åˆ†æ)
```yaml
retrieval:
  top_k: 50
reranker:
  cross_encoder:
    top_k: 30
```

## âš¡ å¿«é€Ÿä¿®æ”¹æ–¹æ³•

### 1. ç¼–è¾‘é…ç½®æ–‡ä»¶
```bash
vim config/unified_config.yaml
```

### 2. æ‰¾åˆ°é‡æ’å™¨é…ç½®
```yaml
reranker:
  cross_encoder:
    top_k: 20  # ä¿®æ”¹è¿™ä¸ªæ•°å€¼
```

### 3. é‡å¯ç³»ç»Ÿ
```bash
./categoryrag start
```

## ğŸ“ˆ æ€§èƒ½å½±å“

| æ–‡æ¡£æ•°é‡ | å“åº”æ—¶é—´ | å›ç­”è´¨é‡ | é€‚ç”¨åœºæ™¯ |
|---------|---------|---------|---------|
| 10-15   | å¿«      | ä¸­ç­‰     | ç®€å•æŸ¥è¯¢ |
| 15-20   | ä¸­ç­‰    | è‰¯å¥½     | æ—¥å¸¸ä½¿ç”¨ |
| 20-25   | è¾ƒæ…¢    | ä¼˜ç§€     | å¤æ‚åˆ†æ |
| 25-30   | æ…¢      | æœ€ä½³     | æ·±åº¦ç ”ç©¶ |

## ğŸ” éªŒè¯é…ç½®

### æ£€æŸ¥å½“å‰é…ç½®
```bash
grep -A 5 "cross_encoder:" config/unified_config.yaml
```

### æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€
```bash
./categoryrag status
```

### æµ‹è¯•æ•ˆæœ
```bash
./categoryrag start
# ç„¶åæé—®å¹¶è§‚å¯Ÿ "æ£€ç´¢ç»“æœ: X ä¸ªæ–‡æ¡£ç‰‡æ®µ" çš„æ•°é‡
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **`retrieval.top_k`** å¿…é¡» â‰¥ **`reranker.top_k`**
2. æ–‡æ¡£æ•°é‡è¿‡å¤šä¼šå¢åŠ APIæˆæœ¬å’Œå“åº”æ—¶é—´
3. æ–‡æ¡£æ•°é‡è¿‡å°‘å¯èƒ½å¯¼è‡´ä¿¡æ¯ä¸å…¨é¢
4. å»ºè®®ä»é»˜è®¤é…ç½®å¼€å§‹ï¼Œæ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´

## ğŸ¯ å½“å‰çŠ¶æ€

âœ… **å·²é…ç½®ä¸ºåŸºäº20ä¸ªæ–‡æ¡£ç”Ÿæˆå›ç­”**
- `retrieval.top_k: 30` (åˆå§‹æ£€ç´¢30ä¸ª)
- `reranker.top_k: 20` (æœ€ç»ˆä½¿ç”¨20ä¸ª)

---

ğŸ’¡ **è®°ä½**: `reranker.cross_encoder.top_k` æ˜¯æ§åˆ¶æœ€ç»ˆæ–‡æ¡£æ•°é‡çš„å…³é”®å‚æ•°ï¼
